:root {
  --bg-dark: #020617;
  --bg-mid: #0f172a;
  --text-light: #e2e8f0;
  --text-dark: #94a3b8;
  --accent-glow: #3b82f6;
  --accent-glow-tint: rgba(59, 130, 246, 0.1);
  --border-color: rgba(148, 163, 184, 0.2);
  --border-radius: 12px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Inter', sans-serif;
  background-color: var(--bg-dark);
  color: var(--text-light);
  min-height: 100vh;
  overflow-x: hidden;
}

/* background */
#aurora-background {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
  background:
    radial-gradient(ellipse at 20% 80%, rgba(59,130,246,.3) 0%, rgba(2,6,23,0) 40%),
    radial-gradient(ellipse at 80% 30%, rgba(96,165,250,.2) 0%, rgba(2,6,23,0) 40%);
  animation: aurora 20s infinite alternate;
}
@keyframes aurora { from { transform: rotate(0deg) scale(1.5); } to { transform: rotate(360deg) scale(1.5); } }

/* layout */
.main-container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 4rem 1rem;
  display: flex;
  flex-direction: column;
  gap: 2.5rem;
}
.header { text-align: center; margin-bottom: 2rem; }
.header h1 {
  font-size: clamp(2.5rem, 4vw, 3rem);
  font-weight: 800;
  line-height: 1.2;

  /* gradient text */
  background: linear-gradient(90deg, #ffffff, #93c5fd);

  /* ✨ proper order for compatibility */
  background-clip: text;
  -webkit-background-clip: text;

  color: transparent;
  -webkit-text-fill-color: transparent;

  margin-bottom: 1rem;
  white-space: nowrap;
  overflow: visible;
  text-overflow: ellipsis;
}
.header p { font-size: 1.1rem; color: var(--text-dark); max-width: 600px; margin: 0 auto; }

/* quick guide */
.quick-guide {
  background: rgba(15, 23, 42, 0.6);
  border: 1px solid var(--border-color);
  border-radius: 16px;
  padding: 1.75rem 2rem;
  margin: 1.5rem auto 0;
  max-width: 650px;
  color: var(--text-dark);
  text-align: left;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  box-shadow: 0 0 25px rgba(59, 130, 246, 0.1);
  animation: fadeIn 0.8s ease;
}

.quick-guide h3 {
  font-size: 1.35rem;
  font-weight: 700;
  background: linear-gradient(90deg, #ffffff, #93c5fd);

  /* ✨ include both versions */
  background-clip: text;
  -webkit-background-clip: text;

  color: transparent;
  -webkit-text-fill-color: transparent;

  text-shadow: 0 0 12px rgba(147, 197, 253, 0.3);
  margin-bottom: 0.9rem;
  text-align: center;
  letter-spacing: 0.5px;
}
.quick-guide ul { list-style: none; padding: 0; margin: 0; }
.quick-guide li { margin: .5rem 0; line-height: 1.6; font-size: 1rem; color: var(--text-light); }
.quick-guide code { background: rgba(59,130,246,.15); padding: .2rem .4rem; border-radius: 6px; font-size: .9rem; color: var(--accent-glow); }
.quick-guide .ai-help { margin-top: 1rem; text-align: center; color: var(--text-dark); font-size: .95rem; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* cards */
.step-card {
  background: rgba(15, 23, 42, 0.6);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: var(--border-radius);
  padding: 2.5rem;
  border: 1px solid var(--border-color);
  transition: transform .3s ease, box-shadow .3s ease;
  position: relative;
}

/* step header */
.step-header { display: flex; align-items: center; gap: .75rem; margin-bottom: 1.25rem; }
.step-number {
  position: static; width: 36px; height: 36px; border-radius: 50%;
  background-color: var(--accent-glow); color: #fff;
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 1.1rem;
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
}
.step-card h2 { margin: 0; padding: 0; text-align: left; font-size: 1.8rem; color: var(--text-light); }

/* upload area */
.upload-area {
  border: 2px dashed var(--border-color);
  border-radius: var(--border-radius);
  padding: 3rem;
  cursor: pointer;
  transition: all .2s ease-in-out;
  text-align: center;
}
.upload-area:hover, .upload-area.dragover { border-color: var(--accent-glow); background-color: var(--accent-glow-tint); }
.upload-area__icon { width: 40px; height: 40px; margin-bottom: 1rem; color: var(--accent-glow); display: inline-block; }
.upload-area__text { color: var(--text-dark); font-weight: 500; font-size: 1.1rem; }
.upload-area__text span { color: var(--accent-glow); font-weight: 600; }
#image-upload-form input[type="file"] { display: none; }

/* preview */
#image-preview-wrapper {
  position: relative; display: none; margin-bottom: 1rem;
  border-radius: var(--border-radius); overflow: hidden;
  border: 1px solid var(--border-color);
  max-width: 100%; max-height: 300px;
}
#image-preview-wrapper canvas {
  display: block; width: auto; height: auto; max-width: 100%; margin: 0 auto;
  box-shadow: 0 0 15px rgba(0,0,0,.4);
}
.file-meta { color: var(--text-dark); font-size: .9rem; margin-top: .5rem; text-align: right; }

/* buttons */
.btn {
  background: var(--accent-glow); color: #fff; border: none;
  padding: 1rem 2.5rem; font-size: 1.1rem; font-weight: 600;
  border-radius: var(--border-radius); cursor: pointer; transition: all .3s ease;
  display: inline-flex; align-items: center; gap: .75rem;
  box-shadow: 0 4px 15px 0 rgba(59, 130, 246, 0.4);
}
.btn:hover { transform: translateY(-3px); box-shadow: 0 7px 20px 0 rgba(59, 130, 246, 0.6); }
.btn:disabled { opacity: .5; cursor: not-allowed; transform: none; box-shadow: none; }
.gemini-btn { background: var(--accent-glow-tint); color: var(--accent-glow); border: 1px solid var(--border-color); }

/* spinner */
.spinner { width: 20px; height: 20px; border: 2px solid rgba(255,255,255,.5); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* results */
.results-container, .skeleton-container { display: none; }
.results-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; }
.animate-slide-up { animation: slideUp .5s ease-out forwards; }
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

.error-card { background-color: rgba(220,38,38,.1); border: 1px solid rgba(220,38,38,.5); padding: 1.5rem; color: #f87171; }
.skeleton-card { opacity: .5; }
.skeleton-item { background: var(--bg-mid); border-radius: 5px; animation: pulse 1.5s infinite ease-in-out; }
@keyframes pulse { 50% { opacity: .6; } }

/* maximize */
.maximize-btn {
  position: absolute; top: 1rem; right: 1rem;
  background: rgba(0,0,0,.5); border: 1px solid var(--border-color);
  color: var(--text-light); cursor: pointer; width: 32px; height: 32px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center; transition: background .2s; z-index: 10;
}
.maximize-btn:hover { background: rgba(0,0,0,.8); color: var(--accent-glow); }

/* modal */
#image-modal-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,.85); backdrop-filter: blur(5px);
  display: flex; align-items: center; justify-content: center; z-index: 1000; cursor: pointer;
  opacity: 0; visibility: hidden; transition: opacity .3s, visibility .3s;
}
#image-modal-overlay.visible { opacity: 1; visibility: visible; }
#image-modal-overlay canvas, #image-modal-overlay .modal-content-wrapper {
  max-width: 90vw; max-height: 90vh; object-fit: contain; border-radius: var(--border-radius);
  box-shadow: 0 0 50px rgba(0,0,0,.5);
}
.modal-content-wrapper { background: var(--bg-mid); padding: 2rem; border: 1px solid var(--border-color); overflow-y: auto; cursor: default; }
.modal-content-wrapper h2 { color: var(--accent-glow); margin-bottom: 1rem; }
.modal-content-wrapper p { line-height: 1.6; color: var(--text-dark); }
.modal-content-wrapper strong { color: var(--text-light); }

/* small helpers */
.text-center { text-align: center; }
.mt-3 { margin-top: 1rem; }
